<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Contacts</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/emergency.css" />
    <script defer src="assets/js/navigation.js"></script>
</head>

<body>
    <div id="navbar"></div>

    <div class="app-container">
        <!-- Main Emergency Card -->
        <div class="emergency-main-card">
            <!-- Header Section -->
            <div class="emergency-header">
                <h2>üö® Emergency Response Center</h2>
                <p class="emergency-subtitle">Critical contacts and resources for flood emergencies</p>
                
                <!-- Location Selector -->
                <div class="location-selector">
                    <label for="locationSelect">üìç Select Your Seattle Neighborhood:</label>
                    <select id="locationSelect" onchange="changeLocation()">
                        <option value="downtown">Downtown Seattle</option>
                        <option value="capitolhill">Capitol Hill</option>
                        <option value="queenanne">Queen Anne</option>
                        <option value="ballard">Ballard</option>
                        <option value="fremont">Fremont</option>
                        <option value="university">University District</option>
                    </select>
                </div>
                
                <!-- Emergency Alert Banner -->
                <div class="emergency-alert-banner">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <strong>Flood Emergency?</strong> Call 911 immediately. Move to higher ground and avoid walking or driving through flood waters.
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3>üöÄ Quick Actions</h3>
                <div class="action-buttons">
                    <button class="action-btn emergency-btn" onclick="callEmergency()">
                        <span class="btn-icon">üìû</span>
                        <span class="btn-text">Call 911</span>
                    </button>
                    <button class="action-btn flood-btn" onclick="callFloodControl()">
                        <span class="btn-icon">üåä</span>
                        <span class="btn-text">Flood Control</span>
                    </button>
                    <button class="action-btn shelter-btn" onclick="findShelter()">
                        <span class="btn-icon">üè†</span>
                        <span class="btn-text">Find Shelter</span>
                    </button>
                    <button class="action-btn report-btn" onclick="reportEmergency()">
                        <span class="btn-icon">üìù</span>
                        <span class="btn-text">Report Emergency</span>
                    </button>
                </div>
            </div>

            <!-- Emergency Contacts Grid -->
            <div class="emergency-contacts" id="emergencyContacts">
                <!-- Content will be dynamically loaded based on selected location -->
            </div>

            <!-- Emergency Procedures -->
            <div class="emergency-procedures">
                <h3>üìã Emergency Procedures</h3>
                <div class="procedure-grid">
                    <div class="procedure-card">
                        <div class="procedure-icon">üåä</div>
                        <h4>Flood Emergency</h4>
                        <ul>
                            <li>Move to higher ground immediately</li>
                            <li>Do not walk or drive through flood waters</li>
                            <li>Turn off utilities if safe to do so</li>
                            <li>Listen to emergency broadcasts</li>
                        </ul>
                    </div>

                    <div class="procedure-card">
                        <div class="procedure-icon">‚ö°</div>
                        <h4>Power Outage</h4>
                        <ul>
                            <li>Use flashlights, not candles</li>
                            <li>Keep refrigerator and freezer doors closed</li>
                            <li>Unplug sensitive electronics</li>
                            <li>Check on neighbors, especially elderly</li>
                        </ul>
                    </div>

                    <div class="procedure-card">
                        <div class="procedure-icon">üè†</div>
                        <h4>Evacuation</h4>
                        <ul>
                            <li>Follow official evacuation routes</li>
                            <li>Take emergency supplies and medications</li>
                            <li>Secure your home before leaving</li>
                            <li>Inform family of your location</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Emergency Kit Checklist -->
            <div class="emergency-kit">
                <h3>üéí Emergency Kit Checklist</h3>
                <div class="kit-grid">
                    <div class="kit-category">
                        <h4>üì± Communication</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Fully charged phone + charger</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Battery-powered radio</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Flashlight + extra batteries</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Power bank (‚â•10,000mAh) + cables</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Car charger / inverter</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Whistle (signal for help)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Printed emergency contact card</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üíä Health & Safety</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>First aid kit</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Prescription medications (7-day supply)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Personal hygiene items</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>N95 masks / face coverings</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Antiseptic wipes / hand sanitizer</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Disposable gloves</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Emergency thermal blanket</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üçû Food & Water</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Water (1 gallon per person per day)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Non-perishable food (3-day supply)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Manual can opener</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Water purification tablets / filter</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Reusable water bottles</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>High-calorie snacks (energy bars, nuts)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Infant/baby food if needed</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üìÑ Important Documents</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>ID, insurance cards, passports</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Emergency contact list</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Cash in small bills</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Copies stored in waterproof pouch</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Digital backups (USB drive / cloud)</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üß• Clothing & Warmth</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Weather-appropriate clothing (layers)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Waterproof jacket / poncho</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Sturdy waterproof footwear</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Socks, hat, gloves</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üß∞ Tools & Safety</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Multi-tool / utility knife</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Duct tape & zip ties</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Waterproof matches / lighter</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Small rope / paracord</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üöø Sanitation</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Toilet paper / tissues</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Trash bags (heavy-duty)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Wet wipes / biodegradable soap</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Feminine hygiene products</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üë∂ Children & Pets</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Baby supplies (diapers, wipes, formula)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Comfort items (toys, books)</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Pet food, leash, carrier</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Pet vaccination records</span>
                            </label>
                        </div>
                    </div>

                    <div class="kit-category">
                        <h4>üó∫Ô∏è Navigation & Info</h4>
                        <div class="kit-items">
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Paper map of local area</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Evacuation routes & meeting points</span>
                            </label>
                            <label class="kit-item">
                                <input type="checkbox" class="kit-checkbox">
                                <span>Local emergency numbers list</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Mobile Quick Access FAB -->
    <a href="map.html" class="quick-access-fab" title="Quick Access to Map">üìç<span class="fab-text">Map</span></a>

    <script>
        let emergencyData = {};
        let currentLocation = 'downtown';

        // Load emergency contacts data
        async function loadEmergencyData() {
            try {
                const response = await fetch('assets/data/emergency-contacts.json');
                emergencyData = await response.json();
                loadLocationContacts(currentLocation);
            } catch (error) {
                console.error('Error loading emergency data:', error);
                // Fallback to default Downtown data
                loadLocationContacts('downtown');
            }
        }

        // Change location and update contacts
        function changeLocation() {
            const select = document.getElementById('locationSelect');
            currentLocation = select.value;
            loadLocationContacts(currentLocation);
            localStorage.setItem('emergencyLocation', currentLocation);
        }

        // Load contacts for specific location
        function loadLocationContacts(location) {
            if (!emergencyData[location]) return;

            const locationData = emergencyData[location];
            const contactsContainer = document.getElementById('emergencyContacts');
            
            contactsContainer.innerHTML = `
                <div class="contact-category">
                    <h3>üö® Critical Emergency Services</h3>
                    <div class="contact-grid">
                        ${locationData.emergencyServices.map(service => `
                            <div class="contact-item critical">
                                <div class="contact-header">
                                    <div class="contact-icon">üö®</div>
                                    <h4>${service.name}</h4>
                                </div>
                                <div class="contact-number">${service.number}</div>
                                <p class="contact-description">${service.description}</p>
                                <button class="call-btn" onclick="callNumber('${service.number}')">Call Now</button>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="contact-category">
                    <h3>üè• Medical & Health Services</h3>
                    <div class="contact-grid">
                        ${locationData.medical.map(service => `
                            <div class="contact-item">
                                <div class="contact-header">
                                    <div class="contact-icon">üè•</div>
                                    <h4>${service.name}</h4>
                                </div>
                                <div class="contact-number">${service.number}</div>
                                <p class="contact-description">${service.description}</p>
                                ${service.address ? `<div class="contact-address">${service.address}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="contact-category">
                    <h3>üè† Shelter & Evacuation</h3>
                    <div class="contact-grid">
                        ${locationData.shelter.map(service => `
                            <div class="contact-item">
                                <div class="contact-header">
                                    <div class="contact-icon">üè†</div>
                                    <h4>${service.name}</h4>
                                </div>
                                <div class="contact-number">${service.number}</div>
                                <p class="contact-description">${service.description}</p>
                                ${service.address ? `<div class="contact-address">${service.address}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="contact-category">
                    <h3>üîß Utilities & Infrastructure</h3>
                    <div class="contact-grid">
                        ${locationData.utilities.map(service => `
                            <div class="contact-item">
                                <div class="contact-header">
                                    <div class="contact-icon">‚ö°</div>
                                    <h4>${service.name}</h4>
                                </div>
                                <div class="contact-number">${service.number}</div>
                                <p class="contact-description">${service.description}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Emergency action functions
        function callEmergency() {
            window.location.href = 'tel:911';
        }

        function callFloodControl() {
            if (emergencyData[currentLocation] && emergencyData[currentLocation].emergencyServices[1]) {
                const number = emergencyData[currentLocation].emergencyServices[1].number.replace(/[^0-9]/g, '');
                window.location.href = `tel:${number}`;
            } else {
                window.location.href = 'tel:911';
            }
        }

        function callNumber(number) {
            const cleanNumber = number.replace(/[^0-9]/g, '');
            window.location.href = `tel:${cleanNumber}`;
        }

        function findShelter() {
            if (emergencyData[currentLocation] && emergencyData[currentLocation].shelter[0]) {
                const shelter = emergencyData[currentLocation].shelter[0];
                const message = shelter.address ? 
                    `Emergency Shelter: ${shelter.address}\nPhone: ${shelter.number}` :
                    `Emergency Shelter\nPhone: ${shelter.number}`;
                alert(message);
            } else {
                alert('Emergency Shelter information not available for this location.');
            }
        }

        function reportEmergency() {
            // Redirect to reports page for emergency reporting
            window.location.href = 'reports.html';
        }

        // Emergency kit checklist functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved location preference
            const savedLocation = localStorage.getItem('emergencyLocation');
            if (savedLocation && emergencyData[savedLocation]) {
                currentLocation = savedLocation;
                document.getElementById('locationSelect').value = savedLocation;
            }

            // Load emergency data and initialize
            loadEmergencyData();

            // Initialize checklist functionality
            setTimeout(() => {
                const checkboxes = document.querySelectorAll('.kit-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        // Save checklist progress to localStorage
                        const kitData = JSON.parse(localStorage.getItem('emergencyKit') || '{}');
                        kitData[this.parentElement.textContent.trim()] = this.checked;
                        localStorage.setItem('emergencyKit', JSON.stringify(kitData));
                    });

                    // Load saved checklist progress
                    const kitData = JSON.parse(localStorage.getItem('emergencyKit') || '{}');
                    if (kitData[checkbox.parentElement.textContent.trim()]) {
                        checkbox.checked = kitData[checkbox.parentElement.textContent.trim()];
                    }
                });
            }, 100);
        });
    </script>
</body>

</html>